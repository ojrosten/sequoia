<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sequoia: /Users/oliver/sequoia/Source/sequoia/TestFramework/AllocationCheckersCore.hpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Sequoia
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>Source</b></li><li class="navelem"><b>sequoia</b></li><li class="navelem"><b>TestFramework</b></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">AllocationCheckersCore.hpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Core components for the Allocation Testing framework.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/d7b/AllocationCheckersTraits_8hpp_source.html">sequoia/TestFramework/AllocationCheckersTraits.hpp</a>&quot;</code><br />
<code>#include &lt;string&gt;</code><br />
</div>
<p><a href="../../df/d4e/AllocationCheckersCore_8hpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:sequoia_3A_3Atesting_3A_3Acontainer_5Ftag_5Fconstant_3C_20tag_20_3E" id="r_sequoia_3A_3Atesting_3A_3Acontainer_5Ftag_5Fconstant_3C_20tag_20_3E"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d58/structsequoia_1_1testing_1_1container__tag__constant.html">sequoia::testing::container_tag_constant&lt; tag &gt;</a></td></tr>
<tr class="memitem:sequoia_3A_3Atesting_3A_3Aalloc_5Fprediction_3C_20Event_20_3E" id="r_sequoia_3A_3Atesting_3A_3Aalloc_5Fprediction_3C_20Event_20_3E"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/classsequoia_1_1testing_1_1alloc__prediction.html">sequoia::testing::alloc_prediction&lt; Event &gt;</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-enum-members" class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a8d20da91e6167b64e85bdd8a6bde76f1" id="r_a8d20da91e6167b64e85bdd8a6bde76f1"><td class="memItemLeft" align="right" valign="top"><a id="a8d20da91e6167b64e85bdd8a6bde76f1" name="a8d20da91e6167b64e85bdd8a6bde76f1"></a>enum class &#160;</td><td class="memItemRight" valign="bottom"><b>container_tag</b> : bool { <b>x</b>
, <b>y</b>
 }</td></tr>
<tr class="memitem:a62a4f566f8991b117146355633496fa6" id="r_a62a4f566f8991b117146355633496fa6"><td class="memItemLeft" align="right" valign="top"><a id="a62a4f566f8991b117146355633496fa6" name="a62a4f566f8991b117146355633496fa6"></a>enum class &#160;</td><td class="memItemRight" valign="bottom"><b>null_allocation_event</b> { <b>comparison</b>
, <b>spectator</b>
, <b>serialization</b>
, <b>swap</b>
 }</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9a6a8a276c0e3d4a302f95fd72c0127d" id="r_a9a6a8a276c0e3d4a302f95fd72c0127d"><td class="memItemLeft" align="right" valign="top"><a id="a9a6a8a276c0e3d4a302f95fd72c0127d" name="a9a6a8a276c0e3d4a302f95fd72c0127d"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>sequoia::testing::to_string</b> (container_tag tag)</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Core components for the Allocation Testing framework. </p>
<p>The allocation testing framework is built upon the idea of supplying and testing predictions for particular allocation events, in particular:</p>
<ul>
<li>copying</li>
<li>mutating</li>
<li>para copy (use of the copy-like constructor taking an allocator as an extra argument)</li>
<li>para move (use of the move-like constructor taking an allocator as an extra argument)</li>
<li>assignment with/without propagation of the allocator</li>
<li>swap with/without propagation of the allocator</li>
</ul>
<p>To help with readability of actual tests, various user defined literals are introduced so that, for example, 1_c may be used to mean a prediction of <span class="tt">1</span> allocation for a copy event. This is more expressive than just <span class="tt">1</span> and less verbose than <span class="tt">copy_prediction{1}</span>, particularly bearing in mind that often several predictions are supplied together.</p>
<p>In addition to predictions, clients must also supply a function object, per allocator, which consumes a container and returns a copy of the allocator. With these ingredients, together with a container which uses the shared_counting_allocator, the following scenario may be realized:</p>
<p>A extract a copy of the allocator B acquire the number of allocations C perform an operation with an expected number of allocations D acquire the number of allocations E compare the prediction to the difference between D and B.</p>
<p>Note that the framework is designed to work smoothly with std::scoped_allocator_adaptor and/or with containers containing multiple allocators, scoped or otherwise.</p>
<p>Finally, the framework provides a mechanism for systematically shifting predictions. This is very useful for e.g. the MSVC debug build which systematically performs extra allocations. Thus, rather than clients having to specify different predictions on different platforms - or even on a single platform with different build settings - the 'natural' prediction is supplied and the framework shifts this appropriately. The implementation is sufficiently for flexible clients to define their own allocation shifts, should the need arise. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
